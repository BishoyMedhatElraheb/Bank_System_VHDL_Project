LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
USE ieee.numeric_std.ALL;

ENTITY count3 IS
	GENERIC( n: positive := 3);
	PORT(clk, clear, present, up_down: IN std_logic;
		 d_in: IN unsigned(n-1 DOWNTO 0);
		 d_out: OUT unsigned(n-1 DOWNTO 0));
END ENTITY count3;

ARCHITECTURE behav OF count3 IS
	SIGNAL Tcount: unsigned(n-1 DOWNTO 0);
BEGIN
	ct: PROCESS (clk) IS
	BEGIN
		IF rising_edge (clk) THEN
			IF clear = '1' THEN
				Tcount <= (others => '0');
			ELSIF present = '1' THEN
				Tcount <= d_in;
			ELSIF up_down = '1' THEN
				Tcount <= Tcount + 1;
			ELSE
				Tcount <= Tcount - 1;
			END IF;
		END IF;
	END PROCESS ct;
	d_out <= Tcount;
END ARCHITECTURE behav;
	
